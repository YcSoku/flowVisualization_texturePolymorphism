var pr=Object.defineProperty;var Rr=(O,F,U)=>F in O?pr(O,F,{enumerable:!0,configurable:!0,writable:!0,value:U}):O[F]=U;var c=(O,F,U)=>(Rr(O,typeof F!="symbol"?F+"":F,U),U);(function(){"use strict";var O=(t=>(t[t.R8G8B8A8_UBYTE=0]="R8G8B8A8_UBYTE",t[t.R32_SFLOAT=1]="R32_SFLOAT",t[t.R32G32_SFLOAT=2]="R32G32_SFLOAT",t[t.R32G32B32_SFLOAT=3]="R32G32B32_SFLOAT",t[t.R32G32B32A32_SFLOAT=4]="R32G32B32A32_SFLOAT",t[t.Format_Num=5]="Format_Num",t))(O||{});function F(t,e){return function(){return t.apply(e,arguments)}}const{toString:U}=Object.prototype,{getPrototypeOf:ie}=Object,W=(t=>e=>{const r=U.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),w=t=>(t=t.toLowerCase(),e=>W(e)===t),z=t=>e=>typeof e===t,{isArray:P}=Array,I=z("undefined");function Ze(t){return t!==null&&!I(t)&&t.constructor!==null&&!I(t.constructor)&&b(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Te=w("ArrayBuffer");function et(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Te(t.buffer),e}const tt=z("string"),b=z("function"),Be=z("number"),j=t=>t!==null&&typeof t=="object",rt=t=>t===!0||t===!1,H=t=>{if(W(t)!=="object")return!1;const e=ie(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},it=w("Date"),nt=w("File"),st=w("Blob"),at=w("FileList"),ot=t=>j(t)&&b(t.pipe),ut=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||b(t.append)&&((e=W(t))==="formdata"||e==="object"&&b(t.toString)&&t.toString()==="[object FormData]"))},lt=w("URLSearchParams"),ft=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function k(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let i,n;if(typeof t!="object"&&(t=[t]),P(t))for(i=0,n=t.length;i<n;i++)e.call(null,t[i],i,t);else{const s=r?Object.getOwnPropertyNames(t):Object.keys(t),a=s.length;let l;for(i=0;i<a;i++)l=s[i],e.call(null,t[l],l,t)}}function be(t,e){e=e.toLowerCase();const r=Object.keys(t);let i=r.length,n;for(;i-- >0;)if(n=r[i],e===n.toLowerCase())return n;return null}const _e=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Fe=t=>!I(t)&&t!==_e;function ne(){const{caseless:t}=Fe(this)&&this||{},e={},r=(i,n)=>{const s=t&&be(e,n)||n;H(e[s])&&H(i)?e[s]=ne(e[s],i):H(i)?e[s]=ne({},i):P(i)?e[s]=i.slice():e[s]=i};for(let i=0,n=arguments.length;i<n;i++)arguments[i]&&k(arguments[i],r);return e}const ct=(t,e,r,{allOwnKeys:i}={})=>(k(e,(n,s)=>{r&&b(n)?t[s]=F(n,r):t[s]=n},{allOwnKeys:i}),t),ht=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),dt=(t,e,r,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},mt=(t,e,r,i)=>{let n,s,a;const l={};if(e=e||{},t==null)return e;do{for(n=Object.getOwnPropertyNames(t),s=n.length;s-- >0;)a=n[s],(!i||i(a,t,e))&&!l[a]&&(e[a]=t[a],l[a]=!0);t=r!==!1&&ie(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},pt=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const i=t.indexOf(e,r);return i!==-1&&i===r},Rt=t=>{if(!t)return null;if(P(t))return t;let e=t.length;if(!Be(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},yt=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&ie(Uint8Array)),At=(t,e)=>{const i=(t&&t[Symbol.iterator]).call(t);let n;for(;(n=i.next())&&!n.done;){const s=n.value;e.call(t,s[0],s[1])}},Et=(t,e)=>{let r;const i=[];for(;(r=t.exec(e))!==null;)i.push(r);return i},gt=w("HTMLFormElement"),xt=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,i,n){return i.toUpperCase()+n}),we=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),Tt=w("RegExp"),Se=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),i={};k(r,(n,s)=>{e(n,s,t)!==!1&&(i[s]=n)}),Object.defineProperties(t,i)},Bt=t=>{Se(t,(e,r)=>{if(b(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const i=t[r];if(!!b(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},bt=(t,e)=>{const r={},i=n=>{n.forEach(s=>{r[s]=!0})};return P(t)?i(t):i(String(t).split(e)),r},_t=()=>{},Ft=(t,e)=>(t=+t,Number.isFinite(t)?t:e),se="abcdefghijklmnopqrstuvwxyz",Oe="0123456789",Le={DIGIT:Oe,ALPHA:se,ALPHA_DIGIT:se+se.toUpperCase()+Oe},wt=(t=16,e=Le.ALPHA_DIGIT)=>{let r="";const{length:i}=e;for(;t--;)r+=e[Math.random()*i|0];return r};function St(t){return!!(t&&b(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const Ot=t=>{const e=new Array(10),r=(i,n)=>{if(j(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[n]=i;const s=P(i)?[]:{};return k(i,(a,l)=>{const h=r(a,n+1);!I(h)&&(s[l]=h)}),e[n]=void 0,s}}return i};return r(t,0)},Lt=w("AsyncFunction");var u={isArray:P,isArrayBuffer:Te,isBuffer:Ze,isFormData:ut,isArrayBufferView:et,isString:tt,isNumber:Be,isBoolean:rt,isObject:j,isPlainObject:H,isUndefined:I,isDate:it,isFile:nt,isBlob:st,isRegExp:Tt,isFunction:b,isStream:ot,isURLSearchParams:lt,isTypedArray:yt,isFileList:at,forEach:k,merge:ne,extend:ct,trim:ft,stripBOM:ht,inherits:dt,toFlatObject:mt,kindOf:W,kindOfTest:w,endsWith:pt,toArray:Rt,forEachEntry:At,matchAll:Et,isHTMLForm:gt,hasOwnProperty:we,hasOwnProp:we,reduceDescriptors:Se,freezeMethods:Bt,toObjectSet:bt,toCamelCase:xt,noop:_t,toFiniteNumber:Ft,findKey:be,global:_e,isContextDefined:Fe,ALPHABET:Le,generateString:wt,isSpecCompliantForm:St,toJSONObject:Ot,isAsyncFn:Lt,isThenable:t=>t&&(j(t)||b(t))&&b(t.then)&&b(t.catch)};function y(t,e,r,i,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),i&&(this.request=i),n&&(this.response=n)}u.inherits(y,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:u.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Ne=y.prototype,Ce={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Ce[t]={value:t}}),Object.defineProperties(y,Ce),Object.defineProperty(Ne,"isAxiosError",{value:!0}),y.from=(t,e,r,i,n,s)=>{const a=Object.create(Ne);return u.toFlatObject(t,a,function(h){return h!==Error.prototype},l=>l!=="isAxiosError"),y.call(a,t.message,e,r,i,n),a.cause=t,a.name=t.name,s&&Object.assign(a,s),a};var Nt=null;function ae(t){return u.isPlainObject(t)||u.isArray(t)}function Ue(t){return u.endsWith(t,"[]")?t.slice(0,-2):t}function Pe(t,e,r){return t?t.concat(e).map(function(n,s){return n=Ue(n),!r&&s?"["+n+"]":n}).join(r?".":""):e}function Ct(t){return u.isArray(t)&&!t.some(ae)}const Ut=u.toFlatObject(u,{},null,function(e){return/^is[A-Z]/.test(e)});function K(t,e,r){if(!u.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=u.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(R,N){return!u.isUndefined(N[R])});const i=r.metaTokens,n=r.visitor||d,s=r.dots,a=r.indexes,h=(r.Blob||typeof Blob<"u"&&Blob)&&u.isSpecCompliantForm(e);if(!u.isFunction(n))throw new TypeError("visitor must be a function");function f(m){if(m===null)return"";if(u.isDate(m))return m.toISOString();if(!h&&u.isBlob(m))throw new y("Blob is not supported. Use a Buffer instead.");return u.isArrayBuffer(m)||u.isTypedArray(m)?h&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function d(m,R,N){let _=m;if(m&&!N&&typeof m=="object"){if(u.endsWith(R,"{}"))R=i?R:R.slice(0,-2),m=JSON.stringify(m);else if(u.isArray(m)&&Ct(m)||(u.isFileList(m)||u.endsWith(R,"[]"))&&(_=u.toArray(m)))return R=Ue(R),_.forEach(function(re,mr){!(u.isUndefined(re)||re===null)&&e.append(a===!0?Pe([R],mr,s):a===null?R:R+"[]",f(re))}),!1}return ae(m)?!0:(e.append(Pe(N,R,s),f(m)),!1)}const p=[],x=Object.assign(Ut,{defaultVisitor:d,convertValue:f,isVisitable:ae});function A(m,R){if(!u.isUndefined(m)){if(p.indexOf(m)!==-1)throw Error("Circular reference detected in "+R.join("."));p.push(m),u.forEach(m,function(_,M){(!(u.isUndefined(_)||_===null)&&n.call(e,_,u.isString(M)?M.trim():M,R,x))===!0&&A(_,R?R.concat(M):[M])}),p.pop()}}if(!u.isObject(t))throw new TypeError("data must be an object");return A(t),e}function De(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function oe(t,e){this._pairs=[],t&&K(t,this,e)}const Me=oe.prototype;Me.append=function(e,r){this._pairs.push([e,r])},Me.toString=function(e){const r=e?function(i){return e.call(this,i,De)}:De;return this._pairs.map(function(n){return r(n[0])+"="+r(n[1])},"").join("&")};function Pt(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ie(t,e,r){if(!e)return t;const i=r&&r.encode||Pt,n=r&&r.serialize;let s;if(n?s=n(e,r):s=u.isURLSearchParams(e)?e.toString():new oe(e,r).toString(i),s){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class Dt{constructor(){this.handlers=[]}use(e,r,i){return this.handlers.push({fulfilled:e,rejected:r,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){u.forEach(this.handlers,function(i){i!==null&&e(i)})}}var ke=Dt,Ve={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Mt=typeof URLSearchParams<"u"?URLSearchParams:oe,It=typeof FormData<"u"?FormData:null,kt=typeof Blob<"u"?Blob:null;const Vt=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),vt=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")();var S={isBrowser:!0,classes:{URLSearchParams:Mt,FormData:It,Blob:kt},isStandardBrowserEnv:Vt,isStandardBrowserWebWorkerEnv:vt,protocols:["http","https","file","blob","url","data"]};function Gt(t,e){return K(t,new S.classes.URLSearchParams,Object.assign({visitor:function(r,i,n,s){return S.isNode&&u.isBuffer(r)?(this.append(i,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function Wt(t){return u.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function zt(t){const e={},r=Object.keys(t);let i;const n=r.length;let s;for(i=0;i<n;i++)s=r[i],e[s]=t[s];return e}function ve(t){function e(r,i,n,s){let a=r[s++];const l=Number.isFinite(+a),h=s>=r.length;return a=!a&&u.isArray(n)?n.length:a,h?(u.hasOwnProp(n,a)?n[a]=[n[a],i]:n[a]=i,!l):((!n[a]||!u.isObject(n[a]))&&(n[a]=[]),e(r,i,n[a],s)&&u.isArray(n[a])&&(n[a]=zt(n[a])),!l)}if(u.isFormData(t)&&u.isFunction(t.entries)){const r={};return u.forEachEntry(t,(i,n)=>{e(Wt(i),n,r,0)}),r}return null}const jt={"Content-Type":void 0};function Ht(t,e,r){if(u.isString(t))try{return(e||JSON.parse)(t),u.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(r||JSON.stringify)(t)}const Y={transitional:Ve,adapter:["xhr","http"],transformRequest:[function(e,r){const i=r.getContentType()||"",n=i.indexOf("application/json")>-1,s=u.isObject(e);if(s&&u.isHTMLForm(e)&&(e=new FormData(e)),u.isFormData(e))return n&&n?JSON.stringify(ve(e)):e;if(u.isArrayBuffer(e)||u.isBuffer(e)||u.isStream(e)||u.isFile(e)||u.isBlob(e))return e;if(u.isArrayBufferView(e))return e.buffer;if(u.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return Gt(e,this.formSerializer).toString();if((l=u.isFileList(e))||i.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return K(l?{"files[]":e}:e,h&&new h,this.formSerializer)}}return s||n?(r.setContentType("application/json",!1),Ht(e)):e}],transformResponse:[function(e){const r=this.transitional||Y.transitional,i=r&&r.forcedJSONParsing,n=this.responseType==="json";if(e&&u.isString(e)&&(i&&!this.responseType||n)){const a=!(r&&r.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(l){if(a)throw l.name==="SyntaxError"?y.from(l,y.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:S.classes.FormData,Blob:S.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};u.forEach(["delete","get","head"],function(e){Y.headers[e]={}}),u.forEach(["post","put","patch"],function(e){Y.headers[e]=u.merge(jt)});var ue=Y;const Kt=u.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var Yt=t=>{const e={};let r,i,n;return t&&t.split(`
`).forEach(function(a){n=a.indexOf(":"),r=a.substring(0,n).trim().toLowerCase(),i=a.substring(n+1).trim(),!(!r||e[r]&&Kt[r])&&(r==="set-cookie"?e[r]?e[r].push(i):e[r]=[i]:e[r]=e[r]?e[r]+", "+i:i)}),e};const Ge=Symbol("internals");function V(t){return t&&String(t).trim().toLowerCase()}function X(t){return t===!1||t==null?t:u.isArray(t)?t.map(X):String(t)}function Xt(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=r.exec(t);)e[i[1]]=i[2];return e}const qt=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function le(t,e,r,i,n){if(u.isFunction(i))return i.call(this,e,r);if(n&&(e=r),!!u.isString(e)){if(u.isString(i))return e.indexOf(i)!==-1;if(u.isRegExp(i))return i.test(e)}}function Jt(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,i)=>r.toUpperCase()+i)}function $t(t,e){const r=u.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+r,{value:function(n,s,a){return this[i].call(this,e,n,s,a)},configurable:!0})})}class q{constructor(e){e&&this.set(e)}set(e,r,i){const n=this;function s(l,h,f){const d=V(h);if(!d)throw new Error("header name must be a non-empty string");const p=u.findKey(n,d);(!p||n[p]===void 0||f===!0||f===void 0&&n[p]!==!1)&&(n[p||h]=X(l))}const a=(l,h)=>u.forEach(l,(f,d)=>s(f,d,h));return u.isPlainObject(e)||e instanceof this.constructor?a(e,r):u.isString(e)&&(e=e.trim())&&!qt(e)?a(Yt(e),r):e!=null&&s(r,e,i),this}get(e,r){if(e=V(e),e){const i=u.findKey(this,e);if(i){const n=this[i];if(!r)return n;if(r===!0)return Xt(n);if(u.isFunction(r))return r.call(this,n,i);if(u.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=V(e),e){const i=u.findKey(this,e);return!!(i&&this[i]!==void 0&&(!r||le(this,this[i],i,r)))}return!1}delete(e,r){const i=this;let n=!1;function s(a){if(a=V(a),a){const l=u.findKey(i,a);l&&(!r||le(i,i[l],l,r))&&(delete i[l],n=!0)}}return u.isArray(e)?e.forEach(s):s(e),n}clear(e){const r=Object.keys(this);let i=r.length,n=!1;for(;i--;){const s=r[i];(!e||le(this,this[s],s,e,!0))&&(delete this[s],n=!0)}return n}normalize(e){const r=this,i={};return u.forEach(this,(n,s)=>{const a=u.findKey(i,s);if(a){r[a]=X(n),delete r[s];return}const l=e?Jt(s):String(s).trim();l!==s&&delete r[s],r[l]=X(n),i[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return u.forEach(this,(i,n)=>{i!=null&&i!==!1&&(r[n]=e&&u.isArray(i)?i.join(", "):i)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const i=new this(e);return r.forEach(n=>i.set(n)),i}static accessor(e){const i=(this[Ge]=this[Ge]={accessors:{}}).accessors,n=this.prototype;function s(a){const l=V(a);i[l]||($t(n,a),i[l]=!0)}return u.isArray(e)?e.forEach(s):s(e),this}}q.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),u.freezeMethods(q.prototype),u.freezeMethods(q);var L=q;function fe(t,e){const r=this||ue,i=e||r,n=L.from(i.headers);let s=i.data;return u.forEach(t,function(l){s=l.call(r,s,n.normalize(),e?e.status:void 0)}),n.normalize(),s}function We(t){return!!(t&&t.__CANCEL__)}function v(t,e,r){y.call(this,t==null?"canceled":t,y.ERR_CANCELED,e,r),this.name="CanceledError"}u.inherits(v,y,{__CANCEL__:!0});function Qt(t,e,r){const i=r.config.validateStatus;!r.status||!i||i(r.status)?t(r):e(new y("Request failed with status code "+r.status,[y.ERR_BAD_REQUEST,y.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}var Zt=S.isStandardBrowserEnv?function(){return{write:function(r,i,n,s,a,l){const h=[];h.push(r+"="+encodeURIComponent(i)),u.isNumber(n)&&h.push("expires="+new Date(n).toGMTString()),u.isString(s)&&h.push("path="+s),u.isString(a)&&h.push("domain="+a),l===!0&&h.push("secure"),document.cookie=h.join("; ")},read:function(r){const i=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function er(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function tr(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function ze(t,e){return t&&!er(e)?tr(t,e):e}var rr=S.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let i;function n(s){let a=s;return e&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return i=n(window.location.href),function(a){const l=u.isString(a)?n(a):a;return l.protocol===i.protocol&&l.host===i.host}}():function(){return function(){return!0}}();function ir(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function nr(t,e){t=t||10;const r=new Array(t),i=new Array(t);let n=0,s=0,a;return e=e!==void 0?e:1e3,function(h){const f=Date.now(),d=i[s];a||(a=f),r[n]=h,i[n]=f;let p=s,x=0;for(;p!==n;)x+=r[p++],p=p%t;if(n=(n+1)%t,n===s&&(s=(s+1)%t),f-a<e)return;const A=d&&f-d;return A?Math.round(x*1e3/A):void 0}}function je(t,e){let r=0;const i=nr(50,250);return n=>{const s=n.loaded,a=n.lengthComputable?n.total:void 0,l=s-r,h=i(l),f=s<=a;r=s;const d={loaded:s,total:a,progress:a?s/a:void 0,bytes:l,rate:h||void 0,estimated:h&&a&&f?(a-s)/h:void 0,event:n};d[e?"download":"upload"]=!0,t(d)}}var sr=typeof XMLHttpRequest<"u"&&function(t){return new Promise(function(r,i){let n=t.data;const s=L.from(t.headers).normalize(),a=t.responseType;let l;function h(){t.cancelToken&&t.cancelToken.unsubscribe(l),t.signal&&t.signal.removeEventListener("abort",l)}u.isFormData(n)&&(S.isStandardBrowserEnv||S.isStandardBrowserWebWorkerEnv?s.setContentType(!1):s.setContentType("multipart/form-data;",!1));let f=new XMLHttpRequest;if(t.auth){const A=t.auth.username||"",m=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(A+":"+m))}const d=ze(t.baseURL,t.url);f.open(t.method.toUpperCase(),Ie(d,t.params,t.paramsSerializer),!0),f.timeout=t.timeout;function p(){if(!f)return;const A=L.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders()),R={data:!a||a==="text"||a==="json"?f.responseText:f.response,status:f.status,statusText:f.statusText,headers:A,config:t,request:f};Qt(function(_){r(_),h()},function(_){i(_),h()},R),f=null}if("onloadend"in f?f.onloadend=p:f.onreadystatechange=function(){!f||f.readyState!==4||f.status===0&&!(f.responseURL&&f.responseURL.indexOf("file:")===0)||setTimeout(p)},f.onabort=function(){!f||(i(new y("Request aborted",y.ECONNABORTED,t,f)),f=null)},f.onerror=function(){i(new y("Network Error",y.ERR_NETWORK,t,f)),f=null},f.ontimeout=function(){let m=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const R=t.transitional||Ve;t.timeoutErrorMessage&&(m=t.timeoutErrorMessage),i(new y(m,R.clarifyTimeoutError?y.ETIMEDOUT:y.ECONNABORTED,t,f)),f=null},S.isStandardBrowserEnv){const A=(t.withCredentials||rr(d))&&t.xsrfCookieName&&Zt.read(t.xsrfCookieName);A&&s.set(t.xsrfHeaderName,A)}n===void 0&&s.setContentType(null),"setRequestHeader"in f&&u.forEach(s.toJSON(),function(m,R){f.setRequestHeader(R,m)}),u.isUndefined(t.withCredentials)||(f.withCredentials=!!t.withCredentials),a&&a!=="json"&&(f.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&f.addEventListener("progress",je(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&f.upload&&f.upload.addEventListener("progress",je(t.onUploadProgress)),(t.cancelToken||t.signal)&&(l=A=>{!f||(i(!A||A.type?new v(null,t,f):A),f.abort(),f=null)},t.cancelToken&&t.cancelToken.subscribe(l),t.signal&&(t.signal.aborted?l():t.signal.addEventListener("abort",l)));const x=ir(d);if(x&&S.protocols.indexOf(x)===-1){i(new y("Unsupported protocol "+x+":",y.ERR_BAD_REQUEST,t));return}f.send(n||null)})};const J={http:Nt,xhr:sr};u.forEach(J,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});var ar={getAdapter:t=>{t=u.isArray(t)?t:[t];const{length:e}=t;let r,i;for(let n=0;n<e&&(r=t[n],!(i=u.isString(r)?J[r.toLowerCase()]:r));n++);if(!i)throw i===!1?new y(`Adapter ${r} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(u.hasOwnProp(J,r)?`Adapter '${r}' is not available in the build`:`Unknown adapter '${r}'`);if(!u.isFunction(i))throw new TypeError("adapter is not a function");return i},adapters:J};function ce(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new v(null,t)}function He(t){return ce(t),t.headers=L.from(t.headers),t.data=fe.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),ar.getAdapter(t.adapter||ue.adapter)(t).then(function(i){return ce(t),i.data=fe.call(t,t.transformResponse,i),i.headers=L.from(i.headers),i},function(i){return We(i)||(ce(t),i&&i.response&&(i.response.data=fe.call(t,t.transformResponse,i.response),i.response.headers=L.from(i.response.headers))),Promise.reject(i)})}const Ke=t=>t instanceof L?t.toJSON():t;function D(t,e){e=e||{};const r={};function i(f,d,p){return u.isPlainObject(f)&&u.isPlainObject(d)?u.merge.call({caseless:p},f,d):u.isPlainObject(d)?u.merge({},d):u.isArray(d)?d.slice():d}function n(f,d,p){if(u.isUndefined(d)){if(!u.isUndefined(f))return i(void 0,f,p)}else return i(f,d,p)}function s(f,d){if(!u.isUndefined(d))return i(void 0,d)}function a(f,d){if(u.isUndefined(d)){if(!u.isUndefined(f))return i(void 0,f)}else return i(void 0,d)}function l(f,d,p){if(p in e)return i(f,d);if(p in t)return i(void 0,f)}const h={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(f,d)=>n(Ke(f),Ke(d),!0)};return u.forEach(Object.keys(Object.assign({},t,e)),function(d){const p=h[d]||n,x=p(t[d],e[d],d);u.isUndefined(x)&&p!==l||(r[d]=x)}),r}const Ye="1.4.0",he={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{he[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});const Xe={};he.transitional=function(e,r,i){function n(s,a){return"[Axios v"+Ye+"] Transitional option '"+s+"'"+a+(i?". "+i:"")}return(s,a,l)=>{if(e===!1)throw new y(n(a," has been removed"+(r?" in "+r:"")),y.ERR_DEPRECATED);return r&&!Xe[a]&&(Xe[a]=!0,console.warn(n(a," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,a,l):!0}};function or(t,e,r){if(typeof t!="object")throw new y("options must be an object",y.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let n=i.length;for(;n-- >0;){const s=i[n],a=e[s];if(a){const l=t[s],h=l===void 0||a(l,s,t);if(h!==!0)throw new y("option "+s+" must be "+h,y.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new y("Unknown option "+s,y.ERR_BAD_OPTION)}}var de={assertOptions:or,validators:he};const C=de.validators;class ${constructor(e){this.defaults=e,this.interceptors={request:new ke,response:new ke}}request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=D(this.defaults,r);const{transitional:i,paramsSerializer:n,headers:s}=r;i!==void 0&&de.assertOptions(i,{silentJSONParsing:C.transitional(C.boolean),forcedJSONParsing:C.transitional(C.boolean),clarifyTimeoutError:C.transitional(C.boolean)},!1),n!=null&&(u.isFunction(n)?r.paramsSerializer={serialize:n}:de.assertOptions(n,{encode:C.function,serialize:C.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let a;a=s&&u.merge(s.common,s[r.method]),a&&u.forEach(["delete","get","head","post","put","patch","common"],m=>{delete s[m]}),r.headers=L.concat(a,s);const l=[];let h=!0;this.interceptors.request.forEach(function(R){typeof R.runWhen=="function"&&R.runWhen(r)===!1||(h=h&&R.synchronous,l.unshift(R.fulfilled,R.rejected))});const f=[];this.interceptors.response.forEach(function(R){f.push(R.fulfilled,R.rejected)});let d,p=0,x;if(!h){const m=[He.bind(this),void 0];for(m.unshift.apply(m,l),m.push.apply(m,f),x=m.length,d=Promise.resolve(r);p<x;)d=d.then(m[p++],m[p++]);return d}x=l.length;let A=r;for(p=0;p<x;){const m=l[p++],R=l[p++];try{A=m(A)}catch(N){R.call(this,N);break}}try{d=He.call(this,A)}catch(m){return Promise.reject(m)}for(p=0,x=f.length;p<x;)d=d.then(f[p++],f[p++]);return d}getUri(e){e=D(this.defaults,e);const r=ze(e.baseURL,e.url);return Ie(r,e.params,e.paramsSerializer)}}u.forEach(["delete","get","head","options"],function(e){$.prototype[e]=function(r,i){return this.request(D(i||{},{method:e,url:r,data:(i||{}).data}))}}),u.forEach(["post","put","patch"],function(e){function r(i){return function(s,a,l){return this.request(D(l||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}$.prototype[e]=r(),$.prototype[e+"Form"]=r(!0)});var Q=$;class me{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});const i=this;this.promise.then(n=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](n);i._listeners=null}),this.promise.then=n=>{let s;const a=new Promise(l=>{i.subscribe(l),s=l}).then(n);return a.cancel=function(){i.unsubscribe(s)},a},e(function(s,a,l){i.reason||(i.reason=new v(s,a,l),r(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}static source(){let e;return{token:new me(function(n){e=n}),cancel:e}}}var ur=me;function lr(t){return function(r){return t.apply(null,r)}}function fr(t){return u.isObject(t)&&t.isAxiosError===!0}const pe={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(pe).forEach(([t,e])=>{pe[e]=t});var cr=pe;function qe(t){const e=new Q(t),r=F(Q.prototype.request,e);return u.extend(r,Q.prototype,e,{allOwnKeys:!0}),u.extend(r,e,null,{allOwnKeys:!0}),r.create=function(n){return qe(D(t,n))},r}const g=qe(ue);g.Axios=Q,g.CanceledError=v,g.CancelToken=ur,g.isCancel=We,g.VERSION=Ye,g.toFormData=K,g.AxiosError=y,g.Cancel=g.CanceledError,g.all=function(e){return Promise.all(e)},g.spread=lr,g.isAxiosError=fr,g.mergeConfig=D,g.AxiosHeaders=L,g.formToJSON=t=>ve(u.isHTMLForm(t)?new FormData(t):t),g.HttpStatusCode=cr,g.default=g;var Z=g;const G=O;var T={};T[G.R8G8B8A8_UBYTE]={internalFormat:WebGL2RenderingContext.RGBA8,format:WebGL2RenderingContext.RGBA,type:WebGL2RenderingContext.UNSIGNED_BYTE,components:4,dataType:"Integer",size:1},T[G.R32_SFLOAT]={internalFormat:WebGL2RenderingContext.R32F,format:WebGL2RenderingContext.RED,type:WebGL2RenderingContext.FLOAT,components:1,dataType:"Float_Point",size:4},T[G.R32G32_SFLOAT]={internalFormat:WebGL2RenderingContext.RG32F,format:WebGL2RenderingContext.RG,type:WebGL2RenderingContext.FLOAT,components:2,dataType:"Float_Point",size:4},T[G.R32G32B32_SFLOAT]={internalFormat:WebGL2RenderingContext.RGB32F,format:WebGL2RenderingContext.RGB,type:WebGL2RenderingContext.FLOAT,components:3,dataType:"Float_Point",size:4},T[G.R32G32B32A32_SFLOAT]={internalFormat:WebGL2RenderingContext.RGBA32F,format:WebGL2RenderingContext.RGBA,type:WebGL2RenderingContext.FLOAT,components:4,dataType:"Float_Point",size:4};function Je(){return new Worker("/assets/readPixels.worker.1b19ecc4.js")}class Re{constructor(e,r){c(this,"target");c(this,"flip");c(this,"width");c(this,"height");c(this,"format");c(this,"depth");c(this,"mipLevels");c(this,"arrayLayers");c(this,"masterManager");c(this,"ID",0);c(this,"isReady",!1);this.masterManager=r,this.target=e.target,this.flip=e.flip?e.flip:!1,this.width=e.width?e.width:0,this.height=e.height?e.height:0,this.format=e.format,this.depth=e.depth?e.depth:1,this.mipLevels=e.mipLevels?e.mipLevels:1,this.arrayLayers=e.arrayLayers?e.arrayLayers:1}static Create(e,r,i){let n=new Re(r,i);return n.ID=e.createTexture(),n.width!==0&&n.height!==0&&(e.bindTexture(n.target,n.ID),e.texStorage2D(n.target,n.mipLevels,T[n.format].internalFormat,n.width,n.height),e.bindTexture(r.target,null)),n}FillByBuffer(e,r,i,n,s){let a=T[this.format];e.bindBuffer(e.PIXEL_UNPACK_BUFFER,s),e.bindTexture(this.target,this.ID),this.flip&&e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(this.target,r,a.internalFormat,i,n,0,a.format,a.type,0),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),this.mipLevels>1&&e.generateMipmap(this.target),e.bindBuffer(e.PIXEL_UNPACK_BUFFER,null),e.bindTexture(this.target,null)}async FillByImage(e,r,i,n,s){this.width=n,this.height=s,e.bindTexture(this.target,this.ID),e.texStorage2D(this.target,this.mipLevels,T[this.format].internalFormat,this.width,this.height),e.bindTexture(this.target,null);const a=T[this.format],l=this,h=new Je;let f="from-image";l.flip&&(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),f="flipY"),Z.get(i,{responseType:"blob"}).then(d=>{a.dataType==="Float_Point"?(h.postMessage([d.data,f]),h.onmessage=function(p){e.bindTexture(l.target,l.ID),e.texSubImage2D(l.target,r,0,0,n,s,a.format,a.type,new Float32Array(p.data)),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),l.mipLevels>1&&e.generateMipmap(l.target),e.bindTexture(l.target,null),h.terminate()}):createImageBitmap(d.data,{imageOrientation:f,premultiplyAlpha:"none",colorSpaceConversion:"default"}).then(p=>{e.bindTexture(l.target,l.ID),e.texSubImage2D(l.target,r,0,0,n,s,a.format,a.type,p),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),l.mipLevels>1&&e.generateMipmap(l.target),e.bindTexture(l.target,null)})})}FillByData(e,r,i,n,s){let a=T[this.format];e.bindTexture(this.target,this.ID),this.flip&&e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(this.target,r,a.internalFormat,i,n,0,a.format,a.type,s),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),this.mipLevels>1&&e.generateMipmap(this.target),e.bindTexture(this.target,null)}UpdateByBuffer(e,r,i,n,s,a){e.bindTexture(this.target,this.ID),e.texSubImage2D(this.target,r,i,n,s,a,T[this.format].format,T[this.format].type,0),e.bindTexture(this.target,null)}UpdateByData(e,r,i,n,s,a,l){e.bindTexture(this.target,this.ID),e.pixelStorei(e.UNPACK_ALIGNMENT,1),e.texSubImage2D(this.target,r,i,n,s,a,T[this.format].format,T[this.format].type,l),e.bindTexture(this.target,null)}UpdateByImage(e,r,i){this.masterManager.Lock();const n=T[this.format],s=this,a=new Je;let l="from-image";s.flip&&(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),l="flipY"),Z.get(i,{responseType:"blob"}).then(h=>{n.dataType==="Float_Point"?(a.postMessage([h.data,l]),a.onmessage=function(f){e.bindTexture(s.target,s.ID),e.texSubImage2D(s.target,r,0,0,s.width,s.height,n.format,n.type,new Float32Array(f.data)),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),s.mipLevels>1&&e.generateMipmap(s.target),e.bindTexture(s.target,null),a.terminate(),s.masterManager.Unlock()}):createImageBitmap(h.data,{imageOrientation:l,premultiplyAlpha:"none",colorSpaceConversion:"default"}).then(f=>{e.bindTexture(s.target,s.ID),e.texSubImage2D(s.target,r,0,0,s.width,s.height,n.format,n.type,f),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),s.mipLevels>1&&e.generateMipmap(s.target),e.bindTexture(s.target,null),s.masterManager.Unlock()})})}Bind(e,r){e.activeTexture(e.TEXTURE0+r),e.bindTexture(this.target,this.ID)}Delete(e){e.deleteTexture(this.ID)}}class ye{constructor(e){c(this,"texture");c(this,"viewType");c(this,"format");c(this,"baseMipLevel");c(this,"levelCount");c(this,"baseArrayLayer");c(this,"layerCount");this.texture=e.texture,this.viewType=e.viewType,this.format=e.format,this.baseMipLevel=e.baseMipLevel?e.baseMipLevel:0,this.levelCount=e.levelCount?e.levelCount:1,this.baseArrayLayer=e.baseArrayLayer?e.baseArrayLayer:0,this.layerCount=e.layerCount?e.layerCount:1}static Create(e){return new ye(e)}Bind(e,r){this.texture.Bind(e,r)}Delete(e){this.texture.Delete(e)}}class Ae{constructor(e){c(this,"magFilter");c(this,"minFilter");c(this,"addressModeU");c(this,"addressModeV");c(this,"addressModeW");c(this,"ID",0);this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.addressModeU=e.addressModeU,this.addressModeV=e.addressModeV,this.addressModeW=e.addressModeW}static Create(e,r){let i=new Ae(r);return i.ID=e.createSampler(),e.samplerParameteri(i.ID,e.TEXTURE_MAG_FILTER,i.magFilter),e.samplerParameteri(i.ID,e.TEXTURE_MIN_FILTER,i.minFilter),e.samplerParameteri(i.ID,e.TEXTURE_WRAP_S,i.addressModeU),e.samplerParameteri(i.ID,e.TEXTURE_WRAP_T,i.addressModeV),i.addressModeW&&e.samplerParameteri(i.ID,e.TEXTURE_WRAP_R,i.addressModeW),i}Bind(e,r){e.bindSampler(r,this.ID)}Delete(e){e.deleteSampler(this.ID)}}class Ee{constructor(e){c(this,"textureView");c(this,"sampler");this.textureView=e.textureView,this.sampler=e.sampler}static Create(e){return new Ee(e)}Bind(e,r){this.textureView.Bind(e,r),this.sampler.Bind(e,r)}Delete(e){this.textureView.Delete(e),this.sampler.Delete(e)}}class ge{constructor(e,r,i){c(this,"textureView_array");c(this,"sampler_array");c(this,"texture_array");c(this,"rc",null);c(this,"lockCount",0);this.textureView_array=new Array(e).fill(null),this.sampler_array=new Array(r).fill(null),this.texture_array=new Array(i).fill(null)}static Create(e,r,i){return new ge(e,r,i)}SetContext(e){this.rc=e}Delete(){this.texture_array.forEach((e,r)=>{e!==null&&e.texture.Delete(this.rc),this.texture_array[r]=null}),this.textureView_array.forEach((e,r)=>{e!==null&&e.Delete(this.rc),this.textureView_array[r]=null}),this.sampler_array.forEach((e,r)=>{e!==null&&e.Delete(this.rc),this.sampler_array[r]=null})}AddTextureView(e){let r=!1,i;for(i=0;i<this.textureView_array.length;i++)if(this.textureView_array[i]===null){r=!0;break}return r?(this.textureView_array[i]=this.CreateTextureView(e),i):(console.log("ERROR::TEXTURE_MANAGER::TEXTUREVIEW_ARRAY_OVERFLOW!"),this.textureView_array.length)}AddSampler(e){let r=!1,i;for(i=0;i<this.textureView_array.length;i++)if(this.sampler_array[i]===e)return i;for(i=0;i<this.sampler_array.length;i++)if(this.sampler_array[i]===null){r=!0;break}return r?(this.sampler_array[i]=Ae.Create(this.rc,e),i):(console.log("ERROR::TEXTURE_MANAGER::SAMPLER_ARRAY_OVERFLOW!"),this.sampler_array.length)}SetTexture(e,r){if(e>=this.textureView_array.length||r>=this.sampler_array.length||this.textureView_array[e]===null||this.sampler_array[r]===null)return console.log("ERROR::TEXTURE_MANAGER::TEXTUREVIEW_OR_SAMPLER_CANNOT_FOUND!"),this.texture_array.length;let i=!1,n;for(n=0;n<this.texture_array.length;n++)if(this.texture_array[n]===null){i=!0;break}return i?(this.texture_array[n]={texture:Ee.Create({textureView:this.textureView_array[e],sampler:this.sampler_array[r]}),viewID:e,samplerID:r},n):(console.log("ERROR::TEXTURE_MANAGER::TEXTURE_ARRAY_OVERFLOW!"),this.texture_array.length)}GetTextureViewLength(){let e=0;for(let r=0;r<this.textureView_array.length;r++)this.textureView_array[r]!=null&&e++;return e}DeleteTexture(e){var r;return e>=this.texture_array.length||this.texture_array[e]===null?(console.log("ERROR::TEXTURE_MANAGER::TEXTUREVIEW_CANNOT_FOUND!"),!1):((r=this.texture_array[e])==null||r.texture.textureView.Delete(this.rc),this.texture_array[e]=null,!0)}Empty(){var e,r;for(let i=0;i<this.texture_array.length;i++)this.texture_array[i]!=null&&((e=this.texture_array[i])==null||e.texture.textureView.Delete(this.rc),this.texture_array[i]=null);for(let i=0;i<this.sampler_array.length;i++)this.sampler_array[i]!=null&&((r=this.sampler_array[i])==null||r.Delete(this.rc),this.sampler_array[i]=null);for(let i=0;i<this.textureView_array.length;i++)this.textureView_array[i]!=null&&(this.textureView_array[i]=null)}BindTexture(e,r){var i;if(e.length!==r.length){console.log("ERROR::TEXTURE_MANAGER::TEXTURE_ID_AND_UNITS_NOT_EQUAL!");return}for(let n=0;n<e.length;n++)(i=this.texture_array[e[n]])==null||i.texture.Bind(this.rc,r[n])}GetTexture(e){return this.texture_array[e]===null?(console.log("ERROR::TEXTURE_MANAGER::TEXTUR_CANNOT_FOUND!"),null):this.texture_array[e]}GetTextureView(e){return this.textureView_array[e]===null?(console.log("ERROR::TEXTURE_MANAGER::TEXTUREVIEW_CANNOT_FOUND!"),null):this.textureView_array[e]}CreateTextureData(e){return Re.Create(this.rc,e,this)}CreateTextureView(e){return e.textureDataInfo&&(e.texture=this.CreateTextureData(e.textureDataInfo)),ye.Create(e)}async FillTextureDataByImage(e,r,i,n,s){await this.textureView_array[this.GetTexture(e).viewID].texture.FillByImage(this.rc,r,i,n,s)}UpdateDataBySource(e,r,i,n,s,a,l){this.textureView_array[this.GetTexture(e).viewID].texture.UpdateByData(this.rc,r,i,n,s,a,l)}UpdateDataByBuffer(e,r,i,n,s,a){this.textureView_array[this.GetTexture(e).viewID].texture.UpdateByBuffer(this.rc,r,i,n,s,a)}Lock(){this.lockCount+=1}Unlock(){this.lockCount-=1}IsBusy(){return this.lockCount}UpdateDataByImage(e,r,i){this.textureView_array[this.GetTexture(e).viewID].texture.UpdateByImage(this.rc,i,r)}}class hr{constructor(e,r,i,n){c(this,"name");c(this,"gl",null);c(this,"shaderProgram");this.name=r||"",this.gl=e;const s=e.createProgram();if(!s){console.log("ERROR::Shader program cannot be created!"),this.shaderProgram=null;return}[e.VERTEX_SHADER,e.FRAGMENT_SHADER].forEach((a,l)=>{const h=this.createShader(a,i[l]);!h||e.attachShader(s,h)}),n&&n.length!=0&&e.transformFeedbackVaryings(s,n,e.SEPARATE_ATTRIBS),e.linkProgram(s),e.getProgramParameter(s,e.LINK_STATUS)?this.shaderProgram=s:(console.log(e.getProgramInfoLog(s)),e.deleteProgram(s),this.shaderProgram=null)}createShader(e,r){const i=this.gl.createShader(e);return i?(this.gl.shaderSource(i,r),this.gl.compileShader(i),this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS)?i:(console.log(this.gl.getShaderInfoLog(i)),this.gl.deleteShader(i),null)):null}use(){this.gl.useProgram(this.shaderProgram)}setVertexBufferPointer(e,r,i,n,s,a){this.gl.enableVertexAttribArray(e),this.gl.vertexAttribPointer(e,r,i,n,s,a)}setVertexBufferPointer_Instancing(e,r,i,n,s,a,l=1){this.gl.enableVertexAttribArray(e),this.gl.vertexAttribPointer(e,r,i,n,s,a),this.gl.vertexAttribDivisor(e,l)}breakVertexBufferLink(e){this.gl.disableVertexAttribArray(e)}setFloat(e,r){const i=this.gl.getUniformLocation(this.shaderProgram,e);this.gl.uniform1f(i,r)}setInt(e,r){const i=this.gl.getUniformLocation(this.shaderProgram,e);this.gl.uniform1i(i,r)}setVec1i(e,r){const i=this.gl.getUniformLocation(this.shaderProgram,e);this.gl.uniform1iv(i,r)}setFloat2(e,r,i){const n=this.gl.getUniformLocation(this.shaderProgram,e);this.gl.uniform2f(n,r,i)}setFloat3(e,r,i,n){const s=this.gl.getUniformLocation(this.shaderProgram,e);this.gl.uniform3f(s,r,i,n)}setFloat4(e,r,i,n,s){const a=this.gl.getUniformLocation(this.shaderProgram,e);this.gl.uniform4f(a,r,i,n,s)}setVec4(e,r){const i=this.gl.getUniformLocation(this.shaderProgram,e);this.gl.uniform4fv(i,r)}setMat4(e,r){const i=this.gl.getUniformLocation(this.shaderProgram,e);this.gl.uniformMatrix4fv(i,!1,r)}setUniformBlock(e,r){const i=this.gl.getUniformBlockIndex(this.shaderProgram,e);this.gl.uniformBlockBinding(this.shaderProgram,i,r)}delete(){this.gl.deleteProgram(this.shaderProgram),this.gl=null}}let E,$e,o;const ee=O,B=ge.Create(200,16,200),Qe=(t,e)=>(e||(e=t,t=0),Math.random()*(e-t)+t);async function dr(t,e,r,i,n){const s=await Z.get(r).then(l=>l.data),a=await Z.get(i).then(l=>l.data);return new hr(t,e,[s,a],n)}function te(t,e,r,i){const n=t.createBuffer();return n==null?(console.log("ERROR::Vertex Buffer cannot be created!"),n):(t.bindBuffer(e,n),t.bufferData(e,r,i),t.bindBuffer(e,null),n)}class xe{constructor(){c(this,"simulationVAO",0);c(this,"simulationVAO2",0);c(this,"XFBO",0);c(this,"XFBO2",0);c(this,"sVAO",0);c(this,"xfBO",0);c(this,"simulationBuffer",0);c(this,"lifeBuffer",0);c(this,"xfSimulationBuffer",0);c(this,"xfLifeBuffer",0);c(this,"unPackBuffer",0);c(this,"lifeDataBuffer",0);c(this,"UBO",0);c(this,"updateShader");c(this,"_jump",!1);c(this,"beginBlock",-1);c(this,"streamline",262144);c(this,"maxBlockSize",0);c(this,"_timeCount",0);c(this,"timeLast",10);c(this,"phaseCount",0);c(this,"flowFieldTextureSize",[0,0]);c(this,"flowFieldResourceArray",[]);c(this,"flowFieldTextureInfo",[]);c(this,"seedingTextureSize",[0,0]);c(this,"seedingResourceArray",[]);c(this,"seedingTextureInfo",[]);c(this,"flowfieldTextureArray",[0,0,0]);c(this,"seedingTextureArray",[0,0,0]);c(this,"uboMapBuffer");c(this,"flowBoundary");c(this,"textureArraySize",0);c(this,"isSuspended",!1);c(this,"u_matrix");c(this,"terminate",!1);c(this,"particleMapBuffer");c(this,"aliveIndexData");c(this,"lifeData");c(this,"aliveLineNum",0);c(this,"lineNum",65536*4);c(this,"segmentNum",16);c(this,"fullLife",this.segmentNum*10);c(this,"maxLineNum",this.lineNum);c(this,"_progressRate",0);c(this,"speedFactor",2);c(this,"dropRate",.003);c(this,"dropRateBump",.001);c(this,"fillWidth",1);c(this,"aaWidth",1);c(this,"zoomRate",1);c(this,"primitive","trajectory");c(this,"isSteady",!1);this.updateShader=null,this.flowBoundary=[],this.u_matrix=[],this.uboMapBuffer=new Float32Array(12),this.lifeData=new Float32Array(0),this.aliveIndexData=new Float32Array(0),this.particleMapBuffer=new Float32Array(0)}static Create(){return new xe}async ResourceFileParsing(e){this.flowBoundary=e.flowBoundary,this.uboMapBuffer[8]=this.flowBoundary[0],this.uboMapBuffer[9]=this.flowBoundary[1],this.uboMapBuffer[10]=this.flowBoundary[2],this.uboMapBuffer[11]=this.flowBoundary[3],this.maxLineNum=e.maxTrajectoryNum,this.segmentNum=e.maxSegmentNum,this.maxBlockSize=Math.ceil(Math.sqrt(this.maxLineNum)),this.flowFieldTextureSize=e.flowFieldTextureSize,this.seedingTextureSize=e.seedingTextureSize,this.flowFieldResourceArray=e.flowFieldResourceArray,this.seedingResourceArray=e.seedingResourceArray}async resourcePrepare(){}async Prepare(){const e={textureDataInfo:{target:o.TEXTURE_2D,flip:!0,format:ee.R32G32_SFLOAT},viewType:o.TEXTURE_2D,format:ee.R32G32_SFLOAT},r={textureDataInfo:{target:o.TEXTURE_2D,flip:!0,format:ee.R8G8B8A8_UBYTE},viewType:o.TEXTURE_2D,format:ee.R8G8B8A8_UBYTE},i=B.AddSampler({magFilter:o.NEAREST,minFilter:o.NEAREST,addressModeU:o.CLAMP_TO_EDGE,addressModeV:o.CLAMP_TO_EDGE}),n=B.AddSampler({magFilter:o.LINEAR,minFilter:o.LINEAR,addressModeU:o.CLAMP_TO_EDGE,addressModeV:o.CLAMP_TO_EDGE});this.phaseCount=this.flowFieldResourceArray.length,this.timeLast=this.phaseCount*30,this.textureArraySize=3;for(let a=0;a<this.textureArraySize;a++){const l=B.SetTexture(B.AddTextureView(e),n);this.flowfieldTextureArray[a]=l,await B.FillTextureDataByImage(l,0,this.flowFieldResourceArray[a],this.flowFieldTextureSize[0],this.flowFieldTextureSize[1]);const h=B.SetTexture(B.AddTextureView(r),i);this.seedingTextureArray[a]=h,await B.FillTextureDataByImage(h,0,this.seedingResourceArray[a],this.seedingTextureSize[0],this.seedingTextureSize[1])}this.particleMapBuffer=new Float32Array(this.maxBlockSize*this.maxBlockSize*3).fill(0);for(let a=0;a<this.maxLineNum;a++)this.particleMapBuffer[a*3+0]=Qe(0,1),this.particleMapBuffer[a*3+1]=Qe(0,1),this.particleMapBuffer[a*3+2]=0;const s=new Float32Array(this.maxLineNum);for(let a=0;a<this.maxLineNum;a++)s[a]=this.fullLife;this.lifeData=new Float32Array(this.maxLineNum),this.aliveIndexData=new Float32Array(this.maxLineNum),this.simulationBuffer=te(o,o.ARRAY_BUFFER,this.particleMapBuffer,o.DYNAMIC_DRAW),this.xfSimulationBuffer=te(o,o.ARRAY_BUFFER,this.particleMapBuffer,o.DYNAMIC_DRAW),this.lifeBuffer=te(o,o.ARRAY_BUFFER,s,o.DYNAMIC_DRAW),this.xfLifeBuffer=te(o,o.ARRAY_BUFFER,s,o.DYNAMIC_DRAW),this.UBO=o.createBuffer(),o.bindBuffer(o.ARRAY_BUFFER,this.UBO),o.bufferData(o.ARRAY_BUFFER,48,o.DYNAMIC_DRAW),o.bindBuffer(o.ARRAY_BUFFER,null),this.simulationVAO=o.createVertexArray(),o.bindVertexArray(this.simulationVAO),o.bindBuffer(o.ARRAY_BUFFER,this.simulationBuffer),o.vertexAttribPointer(0,3,o.FLOAT,!1,3*4,0),o.enableVertexAttribArray(0),o.bindBuffer(o.ARRAY_BUFFER,this.lifeBuffer),o.vertexAttribPointer(1,1,o.FLOAT,!1,1*4,0),o.enableVertexAttribArray(1),o.bindVertexArray(null),o.bindBuffer(o.ARRAY_BUFFER,null),this.simulationVAO2=o.createVertexArray(),o.bindVertexArray(this.simulationVAO2),o.bindBuffer(o.ARRAY_BUFFER,this.xfSimulationBuffer),o.vertexAttribPointer(0,3,o.FLOAT,!1,3*4,0),o.enableVertexAttribArray(0),o.bindBuffer(o.ARRAY_BUFFER,this.xfLifeBuffer),o.vertexAttribPointer(1,1,o.FLOAT,!1,1*4,0),o.enableVertexAttribArray(1),o.bindVertexArray(null),o.bindBuffer(o.ARRAY_BUFFER,null),this.XFBO=o.createTransformFeedback(),o.bindTransformFeedback(o.TRANSFORM_FEEDBACK,this.XFBO),o.bindBuffer(o.TRANSFORM_FEEDBACK_BUFFER,this.xfSimulationBuffer),o.bindBufferRange(o.TRANSFORM_FEEDBACK_BUFFER,0,this.xfSimulationBuffer,0,this.maxBlockSize*this.maxBlockSize*12),o.bindBuffer(o.TRANSFORM_FEEDBACK_BUFFER,this.xfLifeBuffer),o.bindBufferRange(o.TRANSFORM_FEEDBACK_BUFFER,1,this.xfLifeBuffer,0,this.maxBlockSize*this.maxBlockSize*4),o.bindTransformFeedback(o.TRANSFORM_FEEDBACK,null),o.bindBuffer(o.TRANSFORM_FEEDBACK_BUFFER,null),this.XFBO2=o.createTransformFeedback(),o.bindTransformFeedback(o.TRANSFORM_FEEDBACK,this.XFBO2),o.bindBuffer(o.TRANSFORM_FEEDBACK_BUFFER,this.simulationBuffer),o.bindBufferRange(o.TRANSFORM_FEEDBACK_BUFFER,0,this.simulationBuffer,0,this.maxBlockSize*this.maxBlockSize*12),o.bindBuffer(o.TRANSFORM_FEEDBACK_BUFFER,this.lifeBuffer),o.bindBufferRange(o.TRANSFORM_FEEDBACK_BUFFER,1,this.lifeBuffer,0,this.maxBlockSize*this.maxBlockSize*4),o.bindTransformFeedback(o.TRANSFORM_FEEDBACK,null),o.bindBuffer(o.TRANSFORM_FEEDBACK_BUFFER,null),this.updateShader=await dr(o,"update","/shaders/update.vert","/shaders/update.frag",["newInfo","aliveTime"])}resourceLoad(e,r){B.UpdateDataByImage(this.flowfieldTextureArray[e],this.flowFieldResourceArray[r],0),B.UpdateDataByImage(this.seedingTextureArray[e],this.seedingResourceArray[r],0),o.finish()}set timeCount(e){this._timeCount=e%this.timeLast}get timeCount(){return this._timeCount}set progressRate(e){if(B.IsBusy())return;const r=Math.floor(this._progressRate*this.phaseCount),i=Math.floor(e*this.phaseCount),n=(i+1)%this.phaseCount;this._progressRate=e,i!=r?this.resourceLoad((n+1)%this.textureArraySize,(n+1)%this.phaseCount):this.isSteady&&(this.timeCount+=1)}getFieldTextures(e){const r=Math.floor(e*this.phaseCount);return[this.flowfieldTextureArray[r%this.textureArraySize],this.flowfieldTextureArray[(r+1)%this.textureArraySize]]}getMaskTextures(e){const r=Math.floor(e*this.phaseCount);return[this.seedingTextureArray[r%this.textureArraySize],this.seedingTextureArray[(r+1)%this.textureArraySize]]}getProgressBetweenTexture(e){const r=e*this.phaseCount;return r-Math.floor(r)}bindUBO(e,r){e.bindBuffer(e.UNIFORM_BUFFER,this.UBO),e.bufferSubData(e.UNIFORM_BUFFER,0,this.uboMapBuffer),e.bindBufferRange(e.UNIFORM_BUFFER,r,this.UBO,0,this.uboMapBuffer.length*4)}async swap(){this.beginBlock%2==0?(this.sVAO=this.simulationVAO,this.xfBO=this.XFBO,this.unPackBuffer=this.simulationBuffer,this.lifeDataBuffer=this.lifeBuffer):(this.sVAO=this.simulationVAO2,this.xfBO=this.XFBO2,this.unPackBuffer=this.xfSimulationBuffer,this.lifeDataBuffer=this.xfLifeBuffer),this.flowFieldTextureInfo=this.getFieldTextures(this._progressRate),this.seedingTextureInfo=this.getMaskTextures(this._progressRate)}tickLogicCount(){this.progressRate=this.timeCount/this.timeLast,this.beginBlock=(this.beginBlock+1)%this.segmentNum,this.swap(),this.uboMapBuffer[0]=this.getProgressBetweenTexture(this._progressRate),this.uboMapBuffer[1]=this.segmentNum,this.uboMapBuffer[2]=this.segmentNum*10,this.uboMapBuffer[3]=this.dropRate,this.uboMapBuffer[4]=this.dropRateBump,this.uboMapBuffer[5]=this.speedFactor*.01*100,this.streamline=this.lineNum}tickRender(e=0){if(this.bindUBO(o,0),o.bindVertexArray(this.sVAO),o.bindTransformFeedback(o.TRANSFORM_FEEDBACK,this.xfBO),B.BindTexture([this.flowFieldTextureInfo[0],this.flowFieldTextureInfo[1],this.seedingTextureInfo[0],this.seedingTextureInfo[1]],[0,1,2,3]),this.updateShader.use(),this.updateShader.setVec1i("flowField",[0,1]),this.updateShader.setVec1i("mask",[2,3]),this.updateShader.setFloat("randomSeed",Math.random()),this.updateShader.setUniformBlock("FlowFieldUniforms",0),o.enable(o.RASTERIZER_DISCARD),o.beginTransformFeedback(o.POINTS),o.drawArrays(o.POINTS,0,this.streamline),o.endTransformFeedback(),o.disable(o.RASTERIZER_DISCARD),o.bindVertexArray(null),o.bindTransformFeedback(o.TRANSFORM_FEEDBACK,null),o.bindBuffer(o.ARRAY_BUFFER,this.unPackBuffer),o.getBufferSubData(o.ARRAY_BUFFER,0,this.particleMapBuffer,0,this.particleMapBuffer.length),o.bindBuffer(o.ARRAY_BUFFER,this.lifeDataBuffer),o.getBufferSubData(o.ARRAY_BUFFER,0,this.lifeData,0,this.lineNum),o.bindBuffer(o.ARRAY_BUFFER,null),o.finish(),this.aliveLineNum=0,this.primitive=="trajectory")for(let r=0;r<this.lineNum;r++)this.lifeData[r]<this.segmentNum*10&&(this.aliveIndexData[this.aliveLineNum]=r,this.aliveLineNum+=1);else for(let r=0;r<this.lineNum;r++)this.lifeData[r]<this.segmentNum*9&&(this.aliveIndexData[this.aliveLineNum]=r,this.aliveLineNum+=1)}}E=xe.Create(),onmessage=async function(t){switch(t.data[0]){case-1:await E.ResourceFileParsing(t.data[1]),this.postMessage([-1]);break;case 0:$e=new OffscreenCanvas(0,0),o=$e.getContext("webgl2");const e=o.getSupportedExtensions();for(const r of e)o.getExtension(r);B.SetContext(o),await E.Prepare(),this.postMessage([0]);break;case 1:if(E.isSuspended)break;E.tickLogicCount(),E.tickRender(),this.postMessage([1,E.beginBlock,E.particleMapBuffer,E.aliveLineNum,E.aliveIndexData]);break;case 2:E.lineNum=t.data[1].lineNum,E.fullLife=t.data[1].fullLife,E.speedFactor=t.data[1].speedFactor,E.dropRate=t.data[1].dropRate,E.dropRateBump=t.data[1].dropRateBump,E.fillWidth=t.data[1].fillWidth,E.aaWidth=t.data[1].aaWidth,E.primitive=t.data[1].primitive,E.isSteady=t.data[1].isSteady;break;case 3:E.progressRate=t.data[1],E._jump=!0;break;case 4:E.isSuspended=t.data[1]}}})();
